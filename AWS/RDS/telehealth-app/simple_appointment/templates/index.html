<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Simple Appointment Booking</title>
    <style>
      body{font-family: Arial, sans-serif; max-width:800px;margin:2rem auto}
      .provider{border:1px solid #ddd;padding:1rem;margin-bottom:1rem}
      .appointments{margin-top:2rem}
      .flash{background:#fffae6;border:1px solid #ffd966;padding:.5rem}
    </style>
  </head>
  <body>
    <h1>Simple Appointment Booking</h1>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash">{{ messages[0] }}</div>
      {% endif %}
    {% endwith %}

    <h2>Providers</h2>
    {% for p in providers %}
      <div class="provider">
        <strong>{{ p.name }}</strong> — {{ p.specialty }}
        <div><a href="{{ url_for('book', provider_id=p.id) }}">Book appointment</a></div>
      </div>
    {% endfor %}

    <div class="appointments">
      <h2>Upcoming Appointments</h2>
      {% if appointments %}
        <ul>
          {% for a in appointments %}
            <li>{{ a.datetime.strftime('%Y-%m-%d %H:%M') }} — {{ a.provider_name }} — {{ a.patient_name }}</li>
          {% endfor %}
        </ul>
      {% else %}
        <p>No appointments yet.</p>
      {% endif %}
    </div>
  </body>
</html>
